requirejs.config({baseUrl:"./src/js",paths:{jquery:"../../libs/js/jquery-1.10.2",jqueryui:"../../libs/js/jquery-ui.min",bootstrap:"../../libs/js/bootstrap",knockout:"../../libs/js/knockout-3.3.0"},shim:{}}),function(a){"function"==typeof define&&define.amd?define(["period-selector","jquery","jquery-ui"],function(b,c){return a(b,c,window,document)}):a(PeriodSelector,jQuery,window,document)}(function(a,b,c,d,e){b.widget("custom.periodSelector",{period:null,_create:function(b){this.period=new a(this.options),this.element.append(this.period.ui)},value:function(a){this.period.setDate(a)},minDate:function(a){this.period.setOptions({minDate:a})},maxDate:function(a){this.period.setOptions({maxDate:a})},change:function(a){this.period.setOptions({change:a})},dispatchChange:function(){this.period.dispatchChange()},updateDate:function(a){this.period.updateDate(a)},destroy:function(){}})}),function(a){"function"==typeof define&&define.amd?define(["knockout","jquery","jquery.period-selector"],function(b,c){return a(b,c,window,document)}):a(ko,jQuery,window,document)}(function(a,b,c,d,e){a.bindingHandlers.periodSelector={init:function(c,d,e,f){a.utils.domNodeDisposal.addDisposeCallback(c,function(){b(c).periodSelector("destroy")});var g=e(),h=a.utils.unwrapObservable(g.periodSelector);b(c).periodSelector(h)},update:function(c,d,e,f){var g=e();if("periodSelector"in g){var h=a.utils.unwrapObservable(g.periodSelector);b(c).periodSelector("value",a.utils.unwrapObservable(h.value))}}}}),function(a){"function"==typeof define&&define.amd?define(["jquery","jquery-ui"],function(b){return a(b,window,document)}):a(jQuery,window,document)}(function(a,b,c,d){return PeriodSelector=function(b){var c=this;this.options=this.getDefaultOptions(),b&&a.extend(this.options,b);var d=this.getOptions("value");this.ui=a("<div class='input-group period-selector'></div>"),this.ui.addClass("period-selector"),this.nextBut=a("<span class='input-group-btn'><button type='button' class='btn' title='Next'><i class='glyphicon glyphicon-chevron-right'></i></button></span>"),this.prevBut=a("<span class='input-group-btn'><button type='button' class='btn' title='Previous'><i class='glyphicon glyphicon-chevron-left'></i></button></span>"),this.nextBut.children("button").addClass(this.getOptions("nextBtnClass")),this.prevBut.children("button").addClass(this.getOptions("prevBtnClass")),this.months=this.createMonths(),this.quarters=this.createQuarters(),this.years=this.createYears(),this.ui.append(this.prevBut),this.container=a("<div class='select-container' />"),this.ui.append(this.container),this.container.append(this.months),this.container.append(this.quarters),this.container.append(this.years),this.ui.append(this.nextBut),this.setDate(d),this.prevBut.on("click",function(){c.movePrev()}),this.nextBut.on("click",function(){c.moveNext()})},PeriodSelector.prototype.show=function(){this.ui.show()},PeriodSelector.prototype.hide=function(){this.ui.hide()},PeriodSelector.prototype.setDate=function(a){this.selectedDate=a,this.refresh()},PeriodSelector.prototype.getDate=function(){return this.selectedDate},PeriodSelector.prototype.refresh=function(a){if(null!=this.selectedDate){var b=this.getOptions("monthSelector"),c=this.getOptions("quarterSelector"),d=this.getOptions("yearSelector"),e=0;b?(this.ui.addClass("monthSel"),this.addMonthsOptions(this.months),e++):this.ui.removeClass("monthSel"),c?(this.ui.addClass("quarterSel"),this.addQuartersOptions(this.quarters),e++):this.ui.removeClass("quarterSel"),d?(this.ui.addClass("yearSel"),this.addYearsOptions(this.years),e++):this.ui.removeClass("yearSel"),this.ui.addClass("selcount-"+e),this.ui.attr("title",this.getValueFormatted(!0))}},PeriodSelector.prototype.updateDate=function(a){var b=this.getSelectedMonth(),c=this.getSelectedQuarter(),d=this.getSelectedYear();this.getOptions("monthSelector");"quarter"==a&&this.selectedDate.setMonth(3*c-1),"month"==a&&this.selectedDate.setMonth(b),this.selectedDate.setFullYear(d),this.checkMinMax(),this.dispatchChange(),this.refresh()},PeriodSelector.prototype.checkMinMax=function(){if(null!=this.selectedDate){var a=this.getOptions("maxDate"),b=this.getOptions("minDate");a.getFullYear()==this.selectedDate.getFullYear()&&this.selectedDate.getMonth()>a.getMonth()&&this.selectedDate.setMonth(a.getMonth()),b.getFullYear()==this.selectedDate.getFullYear()&&this.selectedDate.getMonth()<b.getMonth()&&this.selectedDate.setMonth(b.getMonth())}},PeriodSelector.prototype.dispatchChange=function(){var a=this.getOptions("change");null!=a&&a(this.selectedDate),this.ui.trigger("period-selector.change",[this.selectedDate])},PeriodSelector.prototype.dispatchMonthChange=function(){var a=this.getOptions("monthChange");null!=a&&a(this.getSelectedMonth(),this.selectedDate),this.ui.trigger("period-selector.monthChange",[this.selectedDate])},PeriodSelector.prototype.dispatchQuarterChange=function(){var a=this.getOptions("quarterChange");null!=a&&a(this.getSelectedQuarter(),this.selectedDate),this.ui.trigger("period-selector.quarterChange",[this.selectedDate])},PeriodSelector.prototype.dispatchYearChange=function(){var a=this.getOptions("yearChange");null!=a&&a(this.getSelectedYear(),this.selectedDate),this.ui.trigger("period-selector.yearChange",[this.selectedDate])},PeriodSelector.prototype.getSelectedMonth=function(){if(!this.months)return this.selectedDate.getMonth();var a=this.months[0],b=a.value;return b},PeriodSelector.prototype.normalizeMonthToQuarter=function(a){return 3*parseInt(a/3)},PeriodSelector.prototype.convertMonthToQuarter=function(a){return a=this.normalizeMonthToQuarter(a),parseInt(a/3)+1},PeriodSelector.prototype.getSelectedQuarter=function(){if(!this.quarters){var a=this.selectedDate.getMonth(),b=this.normalizeMonthToQuarter(a);return b}var c=this.quarters[0],d=c.value;return d},PeriodSelector.prototype.getSelectedYear=function(){if(!this.years)return this.selectedDate.getFullYear();var a=this.years[0],b=a.value;return b},PeriodSelector.prototype.getDefaultOptions=function(){var a=new Date,b=new Date;return b.setFullYear(a.getFullYear()-6),b.setMonth(0),{monthSelector:!0,quarterSelector:!0,yearSelector:!0,monthChange:null,yearChange:null,quarterChange:null,change:null,maxDate:a,minDate:b,longMonthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],quarterNames:["Q1","Q2","Q3","Q4"],longQuarterNamnes:["Quarter 1","Quarter 2","Quartes 3","Quarter 4"],nextBtnClass:"btn btn-default",prevBtnClass:"btn btn-default"}},PeriodSelector.prototype.getValueFormatted=function(a){a="undefined"==typeof a||a;var b=this.getOptions("monthSelector"),c=this.getOptions("quarterSelector"),d=this.getOptions("yearSelector"),e="";return e=b?this.getMonthFormatted(a):c?this.getQuarterFormatted(a):d?this.getYearFormatted(a):this.selectedDate.toDateString()},PeriodSelector.prototype.getMonthFormatted=function(a){a="undefined"==typeof a||a;var b=this.selectedDate.getMonth(),c=a?this.selectedDate.getFullYear():parseInt(this.selectedDate.getFullYear().toString().substr(2,2)),d=this.getOptions(a?"longMonthNames":"monthNames");return a?d[b]+" "+c.toString():d[b]+", "+c.toString()},PeriodSelector.prototype.getQuarterFormatted=function(a){a="undefined"==typeof a||a;var b=a?this.selectedDate.getFullYear():parseInt(this.selectedDate.getFullYear().toString().substr(2,2)),c=this.selectedDate.getMonth(),d=this.convertMonthToQuarter(c),e=this.getOptions(a?"longQuarterNames":"quarterNames");return a?e[d-1]+" "+b.toString():e[d-1]+", "+b.toString()},PeriodSelector.prototype.getYearFormatted=function(a){a="undefined"==typeof a||a;var b=a?this.selectedDate.getFullYear():parseInt(this.selectedDate.getFullYear().toString().substr(2,2));return b.toString()},PeriodSelector.prototype.getOptions=function(a,b){var c=this.options[a];return"undefined"==typeof c&&(c=b),c},PeriodSelector.prototype.createMonths=function(){var b=a("<select class='form-control monthSel'></select>");b.addClass("months-list");var c=this;return b.on("change",function(a){c.updateDate("month"),c.dispatchMonthChange()}),b},PeriodSelector.prototype.addMonthsOptions=function(b){if(b){b.empty();for(var c=this.getOptions("maxDate"),d=this.getOptions("minDate"),e=this.selectedDate.getFullYear()==c.getFullYear()?c.getMonth()+1:12,f=this.selectedDate.getFullYear()==d.getFullYear()?d.getMonth():0,g=this.getOptions("monthNames"),h=e-1;h>=f;h--){var i=a("<option>"+g[h]+"</option>");i.attr("value",h),this.selectedDate.getMonth()==h&&i.attr("selected",!0),b.append(i)}}},PeriodSelector.prototype.createQuarters=function(){var b=a("<select class='form-control quarterSel'></select>");b.addClass("quarter-list");var c=this;return b.on("change",function(a){c.updateDate("quarter"),c.dispatchQuarterChange()}),b},PeriodSelector.prototype.addQuartersOptions=function(b){if(b){b.empty();for(var c=this.getOptions("maxDate"),d=this.getOptions("minDate"),e=this.selectedDate.getFullYear()==c.getFullYear()?this.convertMonthToQuarter(c.getMonth())-1:3,f=this.selectedDate.getFullYear()==d.getFullYear()?this.convertMonthToQuarter(d.getMonth())-1:0,g=this.getOptions("quarterNames"),h=e;h>=f;h--){var i=a("<option>"+g[h]+"</option>");this.convertMonthToQuarter(this.selectedDate.getMonth())==h+1&&i.attr("selected",!0),i.attr("value",h+1),b.append(i)}}},PeriodSelector.prototype.createYears=function(){var b=a("<select class='form-control yearSel'></select>");b.addClass("year-list");var c=this;return b.on("change",function(a){c.updateDate("month"),c.dispatchYearChange()}),b},PeriodSelector.prototype.addYearsOptions=function(b){if(b){b.empty();for(var c=this.getOptions("minDate"),d=this.getOptions("maxDate"),e=d.getFullYear(),f=c.getFullYear(),g=!1,h=e;h>=f;h--){var i=a("<option>"+h+"</option>");this.selectedDate.getFullYear()==h&&(i.attr("selected",!0),g=!0),i.attr("value",h),b.append(i)}if(!g){var i=a("<option>("+this.selectedDate.getFullYear()+")</option>");i.attr("selected",!0),i.attr("value",this.selectedDate.getFullYear()),b.append(i)}}},PeriodSelector.prototype.setOptions=function(b){b&&this.options&&a.extend(this.options,b),null==this.options&&(this.options=b),this.checkMinMax(),this.refresh()},PeriodSelector.prototype.moveNext=function(){this.move(1)},PeriodSelector.prototype.movePrev=function(){this.move(-1)},PeriodSelector.prototype.move=function(a){var b=this.getOptions("monthSelector"),c=this.getOptions("quarterSelector"),d=this.getOptions("yearSelector");if(b)this.moveMonths(a),this.dispatchMonthChange(),this.dispatchChange();else if(c){var e=this.normalizeMonthToQuarter(this.selectedDate.getMonth())+3*a,f=e-this.selectedDate.getMonth();this.moveMonths(f),this.dispatchQuarterChange(),this.dispatchChange()}else d&&(this.moveYears(a),this.dispatchYearChange(),this.dispatchChange());this.refresh()},PeriodSelector.prototype.moveMonths=function(a){var b=this.selectedDate.getMonth(),c=this.selectedDate.getFullYear(),d=this.getOptions("maxDate"),e=this.getOptions("minDate");b+=1*a,this.selectedDate.getFullYear()==d.getFullYear()&&b>d.getMonth()||this.selectedDate.getFullYear()==e.getFullYear()&&b<e.getMonth()||(b>11&&this.canMoveYears(1)&&(b-=12,c++),b<0&&this.canMoveYears(-1)&&(b=12+b,c--),this.selectedDate.setMonth(b),this.selectedDate.setFullYear(c))},PeriodSelector.prototype.canMoveYears=function(a){var b=this.selectedDate.getFullYear()+1*a,c=this.getOptions("minDate"),d=this.getOptions("maxDate"),e=d.getFullYear(),f=c.getFullYear();return b<=e&&b>=f},PeriodSelector.prototype.moveYears=function(a){var b=this.selectedDate.getFullYear();this.canMoveYears(a)&&(b+=a),this.selectedDate.setFullYear(b)},PeriodSelector});